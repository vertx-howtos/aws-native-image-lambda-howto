<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Deploying a Vert.x Native function with AWS Lambda | Eclipse Vert.x how-to</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
    crossorigin="anonymous">
  <link rel="icon" type="image/svg+xml" href="assets/images/vertx-square.svg">
</head>

<body>


<nav class="navbar navbar-expand-lg sticky-top navbar-dark bg-purple mb-4 shadow-sm">
  <a class="navbar-brand" href="/">
    <img src="assets/images/vertx-square.svg" alt="Vert.x" width="40" height="40">
    &nbsp; Eclipse Vert.x how-to
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav"
    aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="https://vertx.io/docs/"><i class="fas fa-lg fa-drafting-compass"></i> Vert.x docs</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/vertx-howtos/aws-native-image-lambda-howto"><i class="fab fa-lg fa-github"></i> Source
          code</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/vertx-howtos/aws-native-image-lambda-howto/edit/master/README.adoc"><i
            class="far fa-lg fa-edit"></i>
          Edit this</a>
      </li>
    </ul>
  </div>
</nav>

<div class="container">

  <div class="row">
    <div class="col">
      <h1>Deploying a Vert.x Native function with AWS Lambda</h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This how-to shows you how to deploy a Vert.x-based native image <em>function</em> served by <a href="https://aws.amazon.com/lambda/">AWS Lambda</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-you-will-build">What you will build</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>You will write a function that accepts returns a Quote Of The Day (similar to the UNIX tool).</p>
</li>
<li>
<p>This function will be written in Java.</p>
</li>
<li>
<p>The code will be compiled to native with the help of <a href="http://www.graalvm.org/">GraalVM</a>.</p>
</li>
<li>
<p>A function will be created with <a href="https://aws.amazon.com/cli/">AWS Command Line Interface</a>.</p>
</li>
<li>
<p>This function will be deployed with <a href="https://aws.amazon.com/lambda/">AWS Lambda</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-you-need">What you need</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>A text editor or IDE</p>
</li>
<li>
<p>GraalVM (&gt;= 1.0.0-rc13)</p>
</li>
<li>
<p>Maven</p>
</li>
<li>
<p>AWS CLI tools</p>
</li>
<li>
<p>A AWS account to deploy your function.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-is-a-aws-lambda-function-and-why-is-vert-x-a-good-match">What is a AWS Lambda function and why is Vert.x a good match?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AWS Lambda is a service which takes care of computing your code without any knowledge on the server environment. It is said to be serverless compute. The code is executed based on the response of events in AWS services like adding /removing files in S3 bucket, updating Amazon DynamoDB tables, HTTP request from Amazon Api gateway etc.</p>
</div>
<div class="paragraph">
<p>AWS Lambda code can be written in Java using the Amazon SDK. However due to the nature of the JVM and typical Java frameworks startup time can become a huge bottleneck to the performance of the function. To workaround this usually Java functions would be run on a Java server container, waiting for requests (defeating the whole serverless aspect).</p>
</div>
<div class="paragraph">
<p>Enter Vert.x and GraalVM. Vert.x is ideal for writing functions on GraalVM native-images, because:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Vert.x applications start very fast since there is no magic happening at run time,</p>
</li>
<li>
<p>GraalVM is used compilation to further reduce the startup and memory footprint,</p>
</li>
<li>
<p>Vert.x applications are resource-efficient and remain responsive even under heavy load,</p>
</li>
<li>
<p>Vert.x offers a large ecosystem of reactive clients to other middlewares (databases, messaging, etc),</p>
</li>
<li>
<p>a single functional interface implementation suffices to bootstrap a Vert.x application!</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-a-project">Create a project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start by cloning the following github project: <a href="https://github.com/pmlopes/aws-lambda-native-vertx" class="bare">https://github.com/pmlopes/aws-lambda-native-vertx</a></p>
</div>
<div class="paragraph">
<p>After that let&#8217;s walk over the important parts of the project. Here is the content of the <code>pom.xml</code> file that you should be using:</p>
</div>
<div class="listingblock collapsed">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="xml"><span style="color: #999999;font-weight: bold">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span style="color: #000080">&lt;project</span> <span style="color: #008080">xmlns=</span><span style="color: #d14">"http://maven.apache.org/POM/4.0.0"</span>
         <span style="color: #008080">xmlns:xsi=</span><span style="color: #d14">"http://www.w3.org/2001/XMLSchema-instance"</span> <span style="color: #008080">xsi:schemaLocation=</span><span style="color: #d14">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span style="color: #000080">&gt;</span>

  <span style="color: #000080">&lt;modelVersion&gt;</span>4.0.0<span style="color: #000080">&lt;/modelVersion&gt;</span>

  <span style="color: #000080">&lt;groupId&gt;</span>com.example<span style="color: #000080">&lt;/groupId&gt;</span>
  <span style="color: #000080">&lt;artifactId&gt;</span>myapp<span style="color: #000080">&lt;/artifactId&gt;</span>
  <span style="color: #000080">&lt;version&gt;</span>0.0.1-SNAPSHOT<span style="color: #000080">&lt;/version&gt;</span>

  <span style="color: #000080">&lt;name&gt;</span>aws-lambda-vertx-native<span style="color: #000080">&lt;/name&gt;</span>

  <span style="color: #000080">&lt;properties&gt;</span>
    <span style="color: #000080">&lt;vertx.verticle&gt;</span>vertx.lambda.LambdaBootstrap<span style="color: #000080">&lt;/vertx.verticle&gt;</span>

    <span style="color: #000080">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span style="color: #000080">&lt;/project.build.sourceEncoding&gt;</span>
    <span style="color: #000080">&lt;maven.compiler.target&gt;</span>1.8<span style="color: #000080">&lt;/maven.compiler.target&gt;</span>
    <span style="color: #000080">&lt;maven.compiler.source&gt;</span>1.8<span style="color: #000080">&lt;/maven.compiler.source&gt;</span>
    <span style="color: #000080">&lt;maven.compiler.testSource&gt;</span>1.8<span style="color: #000080">&lt;/maven.compiler.testSource&gt;</span>
    <span style="color: #000080">&lt;maven.compiler.testTarget&gt;</span>1.8<span style="color: #000080">&lt;/maven.compiler.testTarget&gt;</span>
    <span style="color: #000080">&lt;graal.version&gt;</span>1.0.0-rc13<span style="color: #000080">&lt;/graal.version&gt;</span>
  <span style="color: #000080">&lt;/properties&gt;</span>

  <span style="color: #000080">&lt;dependencyManagement&gt;</span>
    <span style="color: #000080">&lt;dependencies&gt;</span>
      <span style="color: #000080">&lt;dependency&gt;</span>
        <span style="color: #000080">&lt;groupId&gt;</span>io.vertx<span style="color: #000080">&lt;/groupId&gt;</span>
        <span style="color: #000080">&lt;artifactId&gt;</span>vertx-stack-depchain<span style="color: #000080">&lt;/artifactId&gt;</span>
        <span style="color: #000080">&lt;version&gt;</span>3.6.3<span style="color: #000080">&lt;/version&gt;</span>
        <span style="color: #000080">&lt;type&gt;</span>pom<span style="color: #000080">&lt;/type&gt;</span>
        <span style="color: #000080">&lt;scope&gt;</span>import<span style="color: #000080">&lt;/scope&gt;</span>
      <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;/dependencies&gt;</span>
  <span style="color: #000080">&lt;/dependencyManagement&gt;</span>

  <span style="color: #000080">&lt;dependencies&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>   <b class="conum">(1)</b>
      <span style="color: #000080">&lt;groupId&gt;</span>com.oracle.substratevm<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>svm-driver<span style="color: #000080">&lt;/artifactId&gt;</span>
      <span style="color: #000080">&lt;version&gt;</span>${graal.version}<span style="color: #000080">&lt;/version&gt;</span>
      <span style="color: #000080">&lt;scope&gt;</span>provided<span style="color: #000080">&lt;/scope&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>
      <span style="color: #000080">&lt;groupId&gt;</span>io.vertx<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>vertx-core<span style="color: #000080">&lt;/artifactId&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>   <b class="conum">(2)</b>
      <span style="color: #000080">&lt;groupId&gt;</span>io.vertx<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>vertx-web-client<span style="color: #000080">&lt;/artifactId&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>
      <span style="color: #000080">&lt;groupId&gt;</span>io.vertx<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>vertx-unit<span style="color: #000080">&lt;/artifactId&gt;</span>
      <span style="color: #000080">&lt;scope&gt;</span>test<span style="color: #000080">&lt;/scope&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
    <span style="color: #000080">&lt;dependency&gt;</span>
      <span style="color: #000080">&lt;groupId&gt;</span>junit<span style="color: #000080">&lt;/groupId&gt;</span>
      <span style="color: #000080">&lt;artifactId&gt;</span>junit<span style="color: #000080">&lt;/artifactId&gt;</span>
      <span style="color: #000080">&lt;version&gt;</span>4.12<span style="color: #000080">&lt;/version&gt;</span>
      <span style="color: #000080">&lt;scope&gt;</span>test<span style="color: #000080">&lt;/scope&gt;</span>
    <span style="color: #000080">&lt;/dependency&gt;</span>
  <span style="color: #000080">&lt;/dependencies&gt;</span>

  <span style="color: #000080">&lt;build&gt;</span>
    <span style="color: #000080">&lt;plugins&gt;</span> <b class="conum">(3)</b>
      <span style="color: #000080">&lt;plugin&gt;</span>
        <span style="color: #000080">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color: #000080">&lt;/groupId&gt;</span>
        <span style="color: #000080">&lt;artifactId&gt;</span>maven-jar-plugin<span style="color: #000080">&lt;/artifactId&gt;</span>
        <span style="color: #000080">&lt;version&gt;</span>3.0.2<span style="color: #000080">&lt;/version&gt;</span>
        <span style="color: #000080">&lt;configuration&gt;</span>
          <span style="color: #000080">&lt;archive&gt;</span>
            <span style="color: #000080">&lt;manifest&gt;</span>
              <span style="color: #000080">&lt;mainClass&gt;</span>${vertx.verticle}<span style="color: #000080">&lt;/mainClass&gt;</span>
            <span style="color: #000080">&lt;/manifest&gt;</span>
          <span style="color: #000080">&lt;/archive&gt;</span>
        <span style="color: #000080">&lt;/configuration&gt;</span>
      <span style="color: #000080">&lt;/plugin&gt;</span>
      <span style="color: #000080">&lt;plugin&gt;</span>
        <span style="color: #000080">&lt;groupId&gt;</span>com.oracle.substratevm<span style="color: #000080">&lt;/groupId&gt;</span>
        <span style="color: #000080">&lt;artifactId&gt;</span>native-image-maven-plugin<span style="color: #000080">&lt;/artifactId&gt;</span>
        <span style="color: #000080">&lt;version&gt;</span>${graal.version}<span style="color: #000080">&lt;/version&gt;</span>
        <span style="color: #000080">&lt;executions&gt;</span>
          <span style="color: #000080">&lt;execution&gt;</span>
            <span style="color: #000080">&lt;goals&gt;</span>
              <span style="color: #000080">&lt;goal&gt;</span>native-image<span style="color: #000080">&lt;/goal&gt;</span>
            <span style="color: #000080">&lt;/goals&gt;</span>
            <span style="color: #000080">&lt;phase&gt;</span>package<span style="color: #000080">&lt;/phase&gt;</span>
          <span style="color: #000080">&lt;/execution&gt;</span>
        <span style="color: #000080">&lt;/executions&gt;</span>
      <span style="color: #000080">&lt;/plugin&gt;</span>
    <span style="color: #000080">&lt;/plugins&gt;</span>
  <span style="color: #000080">&lt;/build&gt;</span>
<span style="color: #000080">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We need <code>svm-driver</code> to handle code incompatibilities with substrateVM.</p>
</li>
<li>
<p>We need <code>vertx-webclient</code> to interact with the lambda environment.</p>
</li>
<li>
<p>GraalVM configuration to produce an image.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="writing-the-function">Writing the function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The function receives the incoming HTTP headers and the HTTP body.
A random QOTD is selected.
For each request, the random quote is sent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="java"><span style="color: #999988;font-style: italic">/*
 * Copyright 2019 Paulo Lopes.
 *
 *  All rights reserved. This program and the accompanying materials
 *  are made available under the terms of the Eclipse Public License v1.0
 *  and Apache License v2.0 which accompanies this distribution.
 *
 *  The Eclipse Public License is available at
 *  http://www.eclipse.org/legal/epl-v10.html
 *
 *  The Apache License v2.0 is available at
 *  http://www.opensource.org/licenses/apache2.0.php
 *
 *  You may elect to redistribute this code under either of these licenses.
 */</span>
<span style="color: #000000;font-weight: bold">package</span> <span style="background-color: #f8f8f8">lambda</span><span style="color: #000000;font-weight: bold">;</span>

<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.core.Future</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.core.MultiMap</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.core.Vertx</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.core.buffer.Buffer</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">vertx.lambda.Lambda</span><span style="color: #000000;font-weight: bold">;</span>

<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">java.util.Random</span><span style="color: #000000;font-weight: bold">;</span>

<span style="color: #999988;font-style: italic">/**
 * A simple QOTD Lambda
 */</span>
<span style="color: #000000;font-weight: bold">public</span> <span style="color: #000000;font-weight: bold">class</span> <span style="color: #445588;font-weight: bold">QOTDLambda</span> <span style="color: #000000;font-weight: bold">implements</span> <span style="background-color: #f8f8f8">Lambda</span> <span style="color: #000000;font-weight: bold">{</span>

  <span style="color: #000000;font-weight: bold">private</span> <span style="color: #000000;font-weight: bold">static</span> <span style="color: #000000;font-weight: bold">final</span> <span style="background-color: #f8f8f8">Random</span> <span style="background-color: #f8f8f8">RANDOM</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #000000;font-weight: bold">new</span> <span style="background-color: #f8f8f8">Random</span><span style="color: #000000;font-weight: bold">();</span>

  <span style="color: #000000;font-weight: bold">private</span> <span style="color: #000000;font-weight: bold">static</span> <span style="color: #000000;font-weight: bold">final</span> <span style="background-color: #f8f8f8">String</span><span style="color: #000000;font-weight: bold">[]</span> <span style="background-color: #f8f8f8">QUOTES</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #000000;font-weight: bold">{</span>    // <b class="conum">(1)</b>
    <span style="color: #d14">"If you find a random command on the internet, try running it as root. What's the worse that could happen?"</span><span style="color: #000000;font-weight: bold">,</span>
    <span style="color: #d14">"Can root create a process that even root can't kill?"</span><span style="color: #000000;font-weight: bold">,</span>
    <span style="color: #d14">"There's no place like ~"</span><span style="color: #000000;font-weight: bold">,</span>
    <span style="color: #d14">"Thou shalt not kill -9."</span><span style="color: #000000;font-weight: bold">,</span>
    <span style="color: #d14">"The 'n' in unmount is missing, leaving it as umount! If you find it, please write to Bell Labs, 600 Mountain Avenue Murray Hill, NJ."</span><span style="color: #000000;font-weight: bold">,</span>
    <span style="color: #d14">"echo \"Just another useless use of cat.\" | cat"</span><span style="color: #000000;font-weight: bold">,</span>
    <span style="color: #d14">"`echo \"Just another useless use of backticks.\"`"</span><span style="color: #000000;font-weight: bold">,</span>
    <span style="color: #d14">"We've just created a special character device for handling complaints, conveniently located at /dev/null."</span><span style="color: #000000;font-weight: bold">,</span>
    <span style="color: #d14">"false - do nothing, unsuccessfully"</span>
  <span style="color: #000000;font-weight: bold">};</span>

  <span style="color: #3c5d5d;font-weight: bold">@Override</span>
  <span style="color: #000000;font-weight: bold">public</span>
  <span style="background-color: #f8f8f8">Future</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">Buffer</span><span style="color: #000000;font-weight: bold">&gt;</span>  // <b class="conum">(2)</b>
  <span style="color: #990000;font-weight: bold">call</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">Vertx</span> <span style="background-color: #f8f8f8">vertx</span><span style="color: #000000;font-weight: bold">,</span> <span style="background-color: #f8f8f8">MultiMap</span> <span style="background-color: #f8f8f8">headers</span><span style="color: #000000;font-weight: bold">,</span> <span style="background-color: #f8f8f8">Buffer</span> <span style="background-color: #f8f8f8">body</span><span style="color: #000000;font-weight: bold">)</span> <span style="color: #000000;font-weight: bold">{</span>    // <b class="conum">(3)</b>
    <span style="color: #999988;font-style: italic">// return a random qotd</span>
    <span style="color: #000000;font-weight: bold">return</span> <span style="background-color: #f8f8f8">Future</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">succeededFuture</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">Buffer</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">buffer</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">QUOTES</span><span style="color: #000000;font-weight: bold">[</span><span style="background-color: #f8f8f8">RANDOM</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">nextInt</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">QUOTES</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">length</span><span style="color: #000000;font-weight: bold">)]));</span>  // <b class="conum">(4)</b>
  <span style="color: #000000;font-weight: bold">}</span>
<span style="color: #000000;font-weight: bold">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We declare a array of quotes.</p>
</li>
<li>
<p>Implement the <code>Lambda</code> interface which returns a <code>Future</code> to allow asynchronous processing.</p>
</li>
<li>
<p>The implementation receives the current <code>Vertx</code> instance and the request headers and body.</p>
</li>
<li>
<p>For each request we return a resolved future with a random quote.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-the-function">Testing the function</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="java"><span style="color: #999988;font-style: italic">/*
 * Copyright 2019 Paulo Lopes.
 *
 *  All rights reserved. This program and the accompanying materials
 *  are made available under the terms of the Eclipse Public License v1.0
 *  and Apache License v2.0 which accompanies this distribution.
 *
 *  The Eclipse Public License is available at
 *  http://www.eclipse.org/legal/epl-v10.html
 *
 *  The Apache License v2.0 is available at
 *  http://www.opensource.org/licenses/apache2.0.php
 *
 *  You may elect to redistribute this code under either of these licenses.
 */</span>
<span style="color: #000000;font-weight: bold">package</span> <span style="background-color: #f8f8f8">lambda</span><span style="color: #000000;font-weight: bold">;</span>

<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.core.Future</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.core.MultiMap</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.core.buffer.Buffer</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.ext.unit.Async</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.ext.unit.TestContext</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.ext.unit.junit.RunTestOnContext</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">io.vertx.ext.unit.junit.VertxUnitRunner</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">org.junit.Rule</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">org.junit.Test</span><span style="color: #000000;font-weight: bold">;</span>
<span style="color: #000000;font-weight: bold">import</span> <span style="color: #555555">org.junit.runner.RunWith</span><span style="color: #000000;font-weight: bold">;</span>

<span style="color: #3c5d5d;font-weight: bold">@RunWith</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">VertxUnitRunner</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">class</span><span style="color: #000000;font-weight: bold">)</span>
<span style="color: #000000;font-weight: bold">public</span> <span style="color: #000000;font-weight: bold">class</span> <span style="color: #445588;font-weight: bold">QOTDLambdaTest</span> <span style="color: #000000;font-weight: bold">{</span>

  <span style="color: #000000;font-weight: bold">private</span> <span style="color: #000000;font-weight: bold">final</span> <span style="background-color: #f8f8f8">QOTDLambda</span> <span style="background-color: #f8f8f8">fn</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #000000;font-weight: bold">new</span> <span style="background-color: #f8f8f8">QOTDLambda</span><span style="color: #000000;font-weight: bold">();</span>

  <span style="color: #3c5d5d;font-weight: bold">@Rule</span>
  <span style="color: #000000;font-weight: bold">public</span> <span style="background-color: #f8f8f8">RunTestOnContext</span> <span style="background-color: #f8f8f8">rule</span> <span style="color: #000000;font-weight: bold">=</span> <span style="color: #000000;font-weight: bold">new</span> <span style="background-color: #f8f8f8">RunTestOnContext</span><span style="color: #000000;font-weight: bold">();</span>

  <span style="color: #3c5d5d;font-weight: bold">@Test</span>
  <span style="color: #000000;font-weight: bold">public</span> <span style="color: #445588;font-weight: bold">void</span> <span style="color: #990000;font-weight: bold">shouldGetAQOTD</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">TestContext</span> <span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">)</span> <span style="color: #000000;font-weight: bold">{</span>
    <span style="color: #000000;font-weight: bold">final</span> <span style="background-color: #f8f8f8">Async</span> <span style="background-color: #f8f8f8">test</span> <span style="color: #000000;font-weight: bold">=</span> <span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">async</span><span style="color: #000000;font-weight: bold">();</span>

    <span style="background-color: #f8f8f8">Future</span><span style="color: #000000;font-weight: bold">&lt;</span><span style="background-color: #f8f8f8">Buffer</span><span style="color: #000000;font-weight: bold">&gt;</span> <span style="background-color: #f8f8f8">fut</span> <span style="color: #000000;font-weight: bold">=</span> <span style="background-color: #f8f8f8">fn</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">call</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">rule</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">vertx</span><span style="color: #000000;font-weight: bold">(),</span> <span style="background-color: #f8f8f8">MultiMap</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">caseInsensitiveMultiMap</span><span style="color: #000000;font-weight: bold">(),</span> <span style="color: #000000;font-weight: bold">null</span><span style="color: #000000;font-weight: bold">);</span>   // <b class="conum">(1)</b>

    <span style="background-color: #f8f8f8">fut</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">setHandler</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">call</span> <span style="color: #000000;font-weight: bold">-&gt;</span> <span style="color: #000000;font-weight: bold">{</span>
      <span style="color: #000000;font-weight: bold">if</span> <span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">call</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">failed</span><span style="color: #000000;font-weight: bold">())</span> <span style="color: #000000;font-weight: bold">{</span>
        <span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">fail</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">call</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">cause</span><span style="color: #000000;font-weight: bold">());</span>  // <b class="conum">(2)</b>
      <span style="color: #000000;font-weight: bold">}</span> <span style="color: #000000;font-weight: bold">else</span> <span style="color: #000000;font-weight: bold">{</span>
        <span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">assertNotNull</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">call</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">result</span><span style="color: #000000;font-weight: bold">());</span>  // <b class="conum">(3)</b>
        <span style="background-color: #f8f8f8">should</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">assertTrue</span><span style="color: #000000;font-weight: bold">(</span><span style="background-color: #f8f8f8">call</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">result</span><span style="color: #000000;font-weight: bold">().</span><span style="color: #008080">length</span><span style="color: #000000;font-weight: bold">()</span> <span style="color: #000000;font-weight: bold">&gt;</span> <span style="color: #009999">0</span><span style="color: #000000;font-weight: bold">);</span>
        <span style="background-color: #f8f8f8">test</span><span style="color: #000000;font-weight: bold">.</span><span style="color: #008080">complete</span><span style="color: #000000;font-weight: bold">();</span>  // <b class="conum">(4)</b>
      <span style="color: #000000;font-weight: bold">}</span>
    <span style="color: #000000;font-weight: bold">});</span>
  <span style="color: #000000;font-weight: bold">}</span>

<span style="color: #000000;font-weight: bold">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Call the function with empty headers and body.</p>
</li>
<li>
<p>Fail the test if the call fails.</p>
</li>
<li>
<p>Verify that there&#8217;s a quote.</p>
</li>
<li>
<p>Terminate the test.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We can easily test that the function works:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>from your IDE, run the <code>junit</code> test, or</p>
</li>
<li>
<p>with Maven: <code>mvn test</code>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preparing-your-aws-dev-environment">Preparing your AWS dev environment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="create-a-lambda-role">Create a Lambda role</h3>
<div class="paragraph">
<p>Bofore being able to deploy to AWS you need to have a role capable of accessing the service. In order to do this create a temp json file (<code>/tmp/trust-policy.json</code>) with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight" style="background-color: #f8f8f8"><code data-lang="json"></code></pre>
</div>
</div>
<div class="paragraph">
<p>And deploy it with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ aws iam create-role \
    --role-name lambda-role \
    --path "/service-role/" \
    --assume-role-policy-document file:///tmp/trust-policy.json</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-your-function">Building your function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Building the function is running the usual maven command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn clean package
$ zip -r function.zip bootstrap target/lambda</pre>
</div>
</div>
<div class="paragraph">
<p>The final zip is the base layer used by the functions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-the-runtime-layer">Deploying the runtime layer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This layer will be installed on top of the Amazon Linux in the <code>/opt</code> directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ aws lambda publish-layer-version \
    --layer-name vertx-native-example \
    --zip-file fileb://function.zip</pre>
</div>
</div>
<div class="paragraph">
<p>This will install the lambda entrypoint <code>/opt/bootstrap</code> and the native image ELF containing all the functions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-the-function">Deploying the function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will need to provide a function zip file, in our case this is not useful as all code lives in the base layer so we can upload "again" the same zip or upload an empty file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ aws lambda create-function --function-name vertxNativeTester \
    --zip-file fileb://function.zip --handler lambda.EchoLambda --runtime provided \
    --role arn:aws:iam::&lt;YOUR-ARN&gt;:role/service-role/lambda-role</pre>
</div>
</div>
<div class="paragraph">
<p>This could be useful if your function requires file resources. In this case you could package the resources for each function on a separate zip file.</p>
</div>
<div class="paragraph">
<p>Since the deployment was done with a custom runtime we need to link the 2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ aws lambda update-function-configuration --function-name vertxNativeTester \
    --layers arn:aws:lambda:eu-central-1:&lt;YOUR-ARN&gt;:layer:vertx-native-example:1</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-the-function-2">Testing the function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Congratulations you just published your first native function. In order to quickly test it use the toolkit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ aws lambda invoke --function-name vertxNativeTester \
    --payload '{"message":"Hello World"}' \
    --log-type Tail response.txt | grep "LogResult" | awk -F'"' '{print $4}' | base64 --decode</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary">Summary</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>We wrote a native function with Vert.x that returns a QOTD.</p>
</li>
<li>
<p>We built a AWS lambda package.</p>
</li>
<li>
<p>We deployed this function with AWS CLI.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also">See also</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://vertx.io/docs/vertx-web-client/java/">Vert.x web-client APIs</a></p>
</li>
</ul>
</div>
</div>
</div>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <!-- Sharingbutton Facebook -->
<a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https://vertx-howtos.github.io/aws-native-image-lambda-howto/" target="_blank"
    rel="noopener" aria-label="">
    <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton Twitter -->
<a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Deploying%20a%20Vert.x%20Native%20function%20with%20AWS%20Lambda&amp;url=https://vertx-howtos.github.io/aws-native-image-lambda-howto/"
    target="_blank" rel="noopener" aria-label="">
    <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton E-Mail -->
<a class="resp-sharing-button__link" href="mailto:?subject=Deploying%20a%20Vert.x%20Native%20function%20with%20AWS%20Lambda&amp;body=https://vertx-howtos.github.io/aws-native-image-lambda-howto/" target="_self" rel="noopener"
    aria-label="">
    <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton LinkedIn -->
<a class="resp-sharing-button__link"
    href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://vertx-howtos.github.io/aws-native-image-lambda-howto/&amp;title=Deploying%20a%20Vert.x%20Native%20function%20with%20AWS%20Lambda&amp;summary=Deploying%20a%20Vert.x%20Native%20function%20with%20AWS%20Lambda&amp;source=https://vertx-howtos.github.io/aws-native-image-lambda-howto/"
    target="_blank" rel="noopener" aria-label="">
    <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton Reddit -->
<a class="resp-sharing-button__link"
    href="https://reddit.com/submit/?url=https://vertx-howtos.github.io/aws-native-image-lambda-howto/&amp;resubmit=true&amp;title=Deploying%20a%20Vert.x%20Native%20function%20with%20AWS%20Lambda" target="_blank" rel="noopener"
    aria-label="">
    <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton WhatsApp -->
<a class="resp-sharing-button__link" href="whatsapp://send?text=Deploying%20a%20Vert.x%20Native%20function%20with%20AWS%20Lambda%20https://vertx-howtos.github.io/aws-native-image-lambda-howto/" target="_blank" rel="noopener"
    aria-label="">
    <div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3 0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7 0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1 0-5.2 4.2-9.4 9.4-9.4 2.5 0 4.9 1 6.7 2.8 1.8 1.8 2.8 4.2 2.8 6.7-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.5.1-.6s.3-.3.4-.5c.2-.1.3-.3.4-.5.1-.2 0-.4 0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z" />
                </svg>
        </div>
    </div>
</a>

<!-- Sharingbutton Telegram -->
<a class="resp-sharing-button__link" href="https://telegram.me/share/url?text=Deploying%20a%20Vert.x%20Native%20function%20with%20AWS%20Lambda&amp;url=https://vertx-howtos.github.io/aws-native-image-lambda-howto/"
    target="_blank" rel="noopener" aria-label="">
    <div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path
                    d="M.707 8.475C.275 8.64 0 9.508 0 9.508s.284.867.718 1.03l5.09 1.897 1.986 6.38a1.102 1.102 0 0 0 1.75.527l2.96-2.41a.405.405 0 0 1 .494-.013l5.34 3.87a1.1 1.1 0 0 0 1.046.135 1.1 1.1 0 0 0 .682-.803l3.91-18.795A1.102 1.102 0 0 0 22.5.075L.706 8.475z" />
                </svg>
        </div>
    </div>
</a>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <hr>
      <p><small>Last published: 2019-04-25 13:04:28 +0000.</small></p>
    </div>
  </div>
</div>

<script>
  (function () {
    const blocks = document.getElementsByClassName("collapsed");
    for (let i = 0; i < blocks.length; i++) {
      const block = blocks[i];
      const blockWrapper = document.createElement("div");
      const details = document.createElement("details");
      const summary = document.createElement("summary");
      summary.innerHTML = "Details <em>(click to expand)</em>";
      details.appendChild(summary);
      details.appendChild(blockWrapper);
      block.parentNode.insertBefore(details, block);
      blockWrapper.appendChild(block);
    }
  })();
</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"></script>
</body>

</html>